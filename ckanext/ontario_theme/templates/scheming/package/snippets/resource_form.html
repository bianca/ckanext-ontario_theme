{% extends 'package/snippets/resource_form.html' %}

{% block basic_fields %}
  {%- if not dataset_type -%}
    <p>
    dataset_type not passed to template. your version of CKAN
    might not be compatible with ckanext-scheming
    </p>
  {%- endif -%}
  {%- set schema = h.scheming_get_dataset_schema(dataset_type) -%}
  {%- for field in schema.resource_fields -%}
    {%- if field.form_snippet is not none -%}
      {%- if field.fieldset -%}
        <fieldset>
          <legend>{{ field.fieldset_name }}</legend>
          <p>{{ field.fieldset_subtitle }}</p>
      {%- endif -%}
      <div class="controls row">
      {%- snippet 'scheming/snippets/form_field.html',
        field=field, data=data, errors=errors,
        entity_type='dataset', object_type=dataset_type -%}
      </div>
      {%- if (field.fieldset and field.fieldset != 1) or loop.index == loop.length -%}
        </fieldset>
      {%- endif -%}
    {%- endif -%}
  {%- endfor -%}
{% endblock %}

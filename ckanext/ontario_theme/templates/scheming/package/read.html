{% extends "package/read.html" %}

{%- set schema = h.scheming_get_dataset_schema(dataset_type) -%}

{% block package_notes %}
  {%- if not dataset_type -%}
    <p>
    dataset_type not passed to template. your version of CKAN
    might not be compatible with ckanext-scheming
    </p>
  {%- endif -%}
  {% if h.scheming_field_by_name(schema.dataset_fields, 'short_description') and
      pkg.short_description %}
    <div class="notes embedded-content">
      <p class="lead">{{ h.scheming_language_text(pkg['short_description']) }}</p>
    </div>
  {% endif %}
  {% if h.scheming_field_by_name(schema.dataset_fields, 'notes_translated') and
    pkg.notes %}
    <div class="notes embedded-content">
      {{ h.render_markdown(h.scheming_language_text(pkg['notes_translated'])) }}
    </div>
  {% endif %}
  <h3>{{ _("Contact") }}</h3>
  {% set contact_name = pkg.maintainer if pkg.maintainer else _("Ontario's Open Data Team") %}
  {% set contact_email = pkg.maintainer_email if pkg.maintainer_email else "opendata@ontario.ca" %} 
  <div>  
    {{contact_name}}&nbsp;|&nbsp;
    <a href="mailto:{{contact_email}}?subject={{pkg.title}}">
      {{contact_email}}
    </a>
  </div>  
{% endblock %}

{% block package_additional_info %}
  {% snippet "scheming/package/snippets/additional_info.html",
    pkg_dict=pkg, dataset_type=dataset_type, schema=schema %}
{% endblock %}